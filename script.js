"use strict";

const form = document.querySelector(".form");
const containerWorkouts = document.querySelector(".workouts");
const inputType = document.querySelector(".form__input--type");
const inputDistance = document.querySelector(".form__input--distance");
const inputDuration = document.querySelector(".form__input--duration");
const inputCadence = document.querySelector(".form__input--cadence");
const inputElevation = document.querySelector(".form__input--elevation");
const button = document.querySelector(".button");

// let map; //–æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã
// let mapEvent; //–æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –Ω–∞–∂–∞—Ç–∏–µ –ø–æ –∫–∞—Ä—Ç–µ

//     form.addEventListener("submit", function (e) {
//       //–ø–µ—Ä–µ–Ω–µ—Å–ª–∏ —ç—Ç–æ—Ç –∫–æ–¥ —Å—é–¥–∞, —Ç–∫ –ø–æ–¥–ø–∏—Å—å –º–∞—Ä–∫–µ—Ä–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Ñ–æ—Ä–º—É —Å –∏–Ω—Ñ-–µ–π –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç - —ç—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —É —Ñ–æ—Ä–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ Enter (—É —Ñ–æ—Ä–º—ã –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ - submit (–æ—Ç–ø—Ä–∞–≤–∫–∞) - –∏, –∫–æ–≥–¥–∞ —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å, –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –Ω–∞—à –º–∞—Ä–∫–µ—Ä)

//       //–ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è. –°–±—Ä–æ—Å–∏–º —ç—Ç–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –µ - —ç—Ç–æ –∫–∞–∫ —Ä–∞–∑ –Ω–∞–∂–∞—Ç–∏–µ Enter-a
//       e.preventDefault();

//       //—Å–¥–µ–ª–∞–µ–º —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º—ã –≤–≤–µ–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–∞–∂–∞–ª–∏ –Ω–∞ Enter, –Ω–∞—à–∏ input-—ã –æ—á–∏—â–∞–ª–∏—Å—å

//       inputDistance.value =
//         inputDuration.value =
//         inputCadence.value =
//         inputElevation.value =
//           ""; //–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞

//       //–±–ª–∞–≥–æ–¥–∞—Ä—è —ç—Ç–æ–º—É console log-y –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –æ –≥–µ–æ–º–µ—Ç–∫–µ, –∫–æ—Ç–æ—Ä—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ –≤–Ω–µ—à–Ω–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
//       console.log(mapEvent);

//       //—ç—Ç–∞ —á–∞—Å—Ç—å –∫–æ–¥–∞ —Å–æ–∑–¥–∞–µ—Ç –≥–µ–æ–º–µ—Ç–∫–∏ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞—Ö
//       const { lat, lng } = mapEvent.latlng;
//       L.marker([lat, lng])
//         .addTo(map)
//         .bindPopup(
//           //–Ω–∞—Å—Ç—Ä–æ–∏–º popup - —ç—Ç–æ –ø–æ–¥–ø–∏—Å—å, –ø–æ—è–≤–ª—è—é—â–∞—è—Å—è –Ω–∞–¥ –º–∞—Ä–∫–µ—Ä–æ–º –Ω–∞ –∫–∞—Ä—Ç–µ
//           L.popup({
//             maxWindth: 250,
//             minWidth: 100,
//             autoClose: false, //—á—Ç–æ–±—ã –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –¥—Ä—É–≥–æ–π –º–∞—Ä–∫–µ—Ä, –ø–æ–¥–ø–∏—Å—å –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –Ω–µ —Å–∫—Ä—ã–≤–∞–ª–∞—Å—å
//             closeOnClick: false, //—á—Ç–æ–±—ã –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –º–∞—Ä–∫–µ—Ä, –ø–æ–¥–ø–∏—Å—å –∫ –Ω–µ–º—É –Ω–µ –ø—Ä–æ–ø–∞–¥–∞–ª–∞
//             className: "mark-popup", //–ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º popup-—É –∫–ª–∞—Å—Å —Å—Ç–∏–ª–µ–π, –∑–∞—Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤ —Ñ–∞–π–ª–µ css
//           })
//         )
//         .setPopupContent("–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞") //—Ç–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ —Ç–∞–±–ª–∏—á–∫–∏ –∫ popup-y (–≤–∑—è–ª–∏ –∏–∑ –º–µ—Ç–æ–¥–æ–≤, —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç —Å–ª–æ–µ–≤, —Ç–µ –ø–∏—à–µ–º —ç—Ç–æ –∫ marker-y, –Ω–æ –Ω–∞—Å–ª–µ–¥—É–µ—Ç —ç—Ç–æ —Å–≤-–≤–æ popap)
//         .openPopup();
//     });

// //–ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ "–±–µ–≥" —É –Ω–∞—Å –ø–∞—Ä-—Ä "—Ç–µ–º–ø", –∞ –ø—Ä–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ "–≤–µ–ª–æ—Å–∏–ø–µ–¥" - "–≤—ã—Å–æ—Ç–∞". –ù–∞—Å—Ç—Ä–æ–∏–º —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è

// //—É input-–æ–≤ –µ—Å—Ç—å —Å–æ–±—ã—Ç–∏–µ change - –∫–æ–≥–¥–∞ –º—ã –≤—ã–±–∏—Ä–∞–µ–º –∫–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π —ç–ª-—Ç –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞, –æ–Ω–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
// inputType.addEventListener("change", function () {
//   inputCadence.closest(".form__row").classList.toggle("form__row--hidden"); //–º–µ—Ç–æ–¥ toggle –ø—Ä–æ–≤–µ—Ä—è–µ—Ç - –µ—Å—Ç—å –ª–∏ —Ç–∞–∫–æ–π –∫–ª–∞—Å—Å —É —ç–ª-—Ç–∞, –∞ –µ—Å–ª–∏ –µ—Å—Ç—å, —Ç–æ —É–¥–∞–ª—è–µ—Ç, –µ—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤–ª—è–µ—Ç

//   //–µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞: —ç–ª-—Ç —Å –∫–ª–∞—Å—Å–æ–º "form__row--hidden" –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–µ –≤ —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –∞ —Ä—è–¥–æ–º - —Å–∞–º –∏–Ω–ø—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ ".form__row" (—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º —ç–ª-—Ç–µ), –ø–æ—ç—Ç–æ–º—É —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –Ω–µ–≥–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–º–µ–Ω–Ω–æ –≤ —ç—Ç–æ–º –∫–ª–∞—Å—Å–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–ª–∞—Å—Å "form__row--hidden" (–¥–æ–±–∏—Ä–∞–µ–º—Å—è –¥–æ –Ω–µ–≥–æ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –º–µ—Ç–æ–¥–∞ closest)
//   inputElevation.closest(".form__row").classList.toggle("form__row--hidden");
// });

//–°–æ–∑–¥–∞–¥–∏–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –∫–ª–∞—Å—Å Workout –∏ –¥–æ—á–µ—Ä–Ω–∏–µ –æ—Ç –Ω–µ–≥–æ —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–∏–¥–∞–º–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
//–∑–¥–µ—Å—å –º—ã –±—É–¥–µ–º –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –ø–æ–ª—É—á–∏–º –∏–∑ input-–æ–≤ –≤ —Ñ–æ—Ä–º–µ
class Workout {
  //—Å–æ–∑–¥–∞–¥–∏–º –¥–∞—Ç—É, –æ–Ω–∞ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –º–∞—Ä–∫–µ—Ä–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
  date = new Date();
  //—Ç–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º —Å –±–æ–ª—å—à–∏–º –∫–æ–ª-–≤–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å—Ç–æ–∏—Ç —Å–¥–µ–ª–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –∫–∞–∂–¥–æ–π —Ç—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∑—è–ª–∏ –∫–æ–ª-–≤–æ –º—Å –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç, –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–∏ –≤ —Å—Ç—Ä–æ–∫—É –∏ –≤–∑—è–ª–∏ –ø–µ—Ä–≤—ã–µ 10 —Ü–∏—Ñ—Ä)
  id = (Date.now() + "").slice(-10);

  constructor(coords, distance, duration) {
    this.coords = coords; //–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
    this.distance = distance; //–¥–∏—Å—Ç–∞–Ω—Ü–∏—è
    this.duration = duration; //–ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  }

  //—Å–æ–∑–¥–∞–¥–∏–º –º–µ—Ç–æ–¥ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤ —Ñ–æ—Ä–º–µ –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –≤—Å–µ—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –º–µ–Ω—è–ª–∞—Å—å –Ω–∞–¥–ø–∏—Å—å —Å —Ç–∏–ø–æ–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∏ –¥–∞—Ç–æ–π
  _setDescription() {
    //—Å –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è —è –º–æ–≥—É –∑–∞—Å—Ç–∞–≤–∏—Ç—å prettier –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É —á–∞—Å—Ç—å –∫–æ–¥–∞ –∏ –Ω–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å
    //prettier-ignore
    const months = ["January","February","March","April","May","June",
      "July","August","September","October","November","December"];
    //—Å–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤–æ–µ —Å–≤-–≤–æ
    this.description = `${this.type[0].toUpperCase()}${this.type.slice(
      1
    )}  -  ${months[this.date.getMonth()]} ${this.date.getDate()}`;
  }
}

//–∫–ª–∞—Å—Å –¥–ª—è –±–µ–≥–∞
class Running extends Workout {
  type = "running"; //–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–π –∏–∑ –Ω–∏–∂–Ω–µ–π —á–∞—Å—Ç–∏ –∫–æ–¥–∞ —Ç—É—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—é—Ç
  constructor(coords, distance, duration, cadence) {
    super(coords, distance, duration);
    this.cadence = cadence;
    this.calcPace(); //–≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ –∑–¥–µ—Å—å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –µ–≥–æ –∑–∞–ø—É—Å–∫–∞
    this._setDescription(); //–≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏ –∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ –Ω–∞ —Ñ–æ—Ä–º–µ
  }
  //—Å–æ–∑–¥–∞–¥–∏–º –º–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞ —Ç–µ–º–ø–∞ –±–µ–≥–∞
  calcPace() {
    this.pace = this.distance / this.duration;
    return this.pace;
  }
}

//–∫–ª–∞—Å—Å –¥–ª—è –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞
class Cycling extends Workout {
  type = "cycling";
  constructor(coords, distance, duration, elevation) {
    super(coords, distance, duration);
    this.elevation = elevation;
    this.calcSpeed();
    this._setDescription();
  }
  //—Å–æ–∑–¥–∞–¥–∏–º –º–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏
  calcSpeed() {
    this.speed = this.distance / (this.duration / 60);
    return this.speed;
  }
}

///////–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞ –æ—Ç–≤–µ—á–∞—é—â–µ–≥–æ –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–æ–Ω –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤—ã—à–µ): –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤—Å–µ –≤ –∫–ª–∞—Å—Å —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏//////

class App {
  //—Å–æ–∑–¥–∞–¥–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å –¥–∞–Ω–Ω—ã–º–∏
  _map;
  _mapEvent;
  _workouts = []; //–º–∞—Å—Å–∏–≤, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–∞—à–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
  constructor() {
    //—á—Ç–æ–±—ã –≤–Ω–∏–∑—É –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –≤—ã–∑—ã–≤–∞—Ç—å –º–µ—Ç–æ–¥ app._getPosition(), –∞ –æ–Ω –∑–∞–ø—É—Å–∫–∞–ª—Å—è "–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏"
    this._getPosition(); //–º–µ—Ç–æ–¥ —Å—Ä–∞–∑—É –∂–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

    //–ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Local Storage
    this._getLocalStorage();

    //—Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã (–Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ Enter), –∫–æ—Ç–æ—Ä–æ–µ –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ _newWorkout
    form.addEventListener("submit", this._newWorkout.bind(this)); //–∑–∞–±–∏–Ω–¥–∏–º this, —á—Ç–æ–±—ã –æ–Ω–æ –≤ —ç—Ç–æ–π —Ñ-–∏–∏ —Å—Å—ã–ª–∞–ª–æ—Å—å –Ω–∞ –Ω–∞—à –æ–±—ä–µ–∫—Ç(—Å–º.–Ω–∏–∂–µ)

    //—Å–æ–±—ã—Ç–∏–µ —Å–º–µ–Ω—ã –≤–∏–¥–∞ —Å–ø–æ—Ä—Ç–∞, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ _togleFeeld
    inputType.addEventListener("change", this._togleFeeld);

    //—Å–¥–µ–ª–∞–µ–º –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –Ω—É–∂–Ω–æ–º—É –º–∞—Ä–∫–µ—Ä—É –Ω–∞ –∫–∞—Ä—Ç–µ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –≤ —Ñ–æ—Ä–º–µ
    containerWorkouts.addEventListener("click", this._moveToPopup.bind(this));
  }
  //–º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤ —Å–ª—É—á–∞–µ —É—Å–ø–µ—Ö–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ñ-–∏—è _loadMap
  _getPosition() {
    if (navigator.geolocation)
      //—Ç—É—Ç –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ –æ–±—ä–µ–∫—Ç–∞ navigator, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è 2 —Ñ—É-–∏–∏ - —Å–æ–≥–ª–∞—Å–∏—è(true) –∏ –Ω–µ—Å–æ–≥–ª–∞—Å–∏—è(false) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–µ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π
      navigator.geolocation.getCurrentPosition(
        //–∑–¥–µ—Å—å –º—ã –ø–µ—Ä–µ–¥–∞–ª–∏ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø—Ä–æ—Å—Ç–æ –∫–∞–∫ –æ–±—ã—á–Ω—É—é —Ñ-–∏—é _loadMap (—Å–º.–Ω–∏–∂–µ)
        //—É–∫–∞–∂–µ–º, —á—Ç–æ –±—É–¥–µ—Ç –∑–Ω–∞—á–∏—Ç—å —ç—Ç–æ—Ç this, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ bind - —Ç–∞–∫ –º—ã –≥–æ–≤–æ—Ä–∏–º –∫–æ–¥—É, —á—Ç–æ –∂–µ —Ç–∞–∫–æ–µ this. –¢–µ–ø–µ—Ä—å –≤ —ç—Ç–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ this - —ç—Ç–æ –∫–∞–∫ —Ä–∞–∑ —Å–∞–º –Ω–∞—à –∫–ª–∞—Å—Å App
        this._loadMap.bind(this),
        //–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤ —Å–ª—É—á–∞–µ –æ—Ç–∫–∞–∑–∞
        function () {
          alert("–í—ã –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª–∏ –¥–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏!");
        }
      );
  }

  //—ç—Ç–∞ —Ñ-–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç this - –ø—Ä–æ—Å—Ç–æ –≤–Ω—É—Ç—Ä–∏ —Ñ-–∏–∏, –Ω–µ –≤ –æ–±—ä–µ–∫—Ç–µ, –∞ –∏–º–µ–Ω–Ω–æ –≤ —Ñ-–∏–∏, –∞ –∫–æ–≥–¥–∞ –º—ã —Ç–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ–º this, –æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è undefind –≤ —Å—Ç—Ä–æ–≥–æ–º —Ä–µ–∂–∏–º–µ. –ü–æ—ç—Ç–æ–º—É –Ω–∞–º –Ω–∞–¥–æ –≤—Ä—É—á–Ω—É—é —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –∑–Ω–∞—á–∏—Ç—å —ç—Ç–æ—Ç this --> –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ bind (—Å–º.–æ–±—Ä–∞—Ç–Ω–æ –≤ _getPosition)
  _loadMap(position) {
    let { latitude } = position.coords;
    let { longitude } = position.coords;
    const coords = [latitude, longitude];

    this._map = L.map("map").setView(coords, 15);
    console.log(this._map);
    L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png", {
      attribution:
        '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
    }).addTo(this._map);

    //–Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞, —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ –Ω–∞–∂–∞—Ç–∏–µ–º –ø–æ –∫–∞—Ä—Ç–µ - –ø—Ä–æ—Å—Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã. –¢—É—Ç —Å–Ω–æ–≤–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è this, –∞ this –≤ –æ–±—Ä–∞–±–æ–æ—Ç—á–∏–∫–∞—Ö —Å–æ–±—ã—Ç–∏–π - —ç—Ç–æ DOM-—ç–ª–µ–º–µ–Ω—Ç, —Å –∫–æ—Ç–æ—Ä—ã–º –º—ã —Ä–∞–±–æ—Ç–∞–µ–º, –∞ —ç—Ç–æ - –Ω–µ  —Ç–æ, —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ. –ü–æ—ç—Ç–æ–º—É –º—ã –±–µ—Ä–µ–º –≤—Å—é —Ñ-–∏—é —Å –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º mapE –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º –≤ –º–µ—Ç–æ–¥ _showForm. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, 2-–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ - –∫–∞–∫ —Ä–∞–∑ –º–µ—Ç–æ–¥ _showForm
    this._map.on("click", this._showForm.bind(this)); //–∫–∞–∫ —Ä–∞–∑ —Ç—É—Ç —É–∫–∞–∑—ã–≤–∞–µ–º bind, —á—Ç–æ–±—ã –æ–Ω —Å—Å—ã–ª–∞–ª—Å—è –Ω–∞ –Ω–∞—à –æ–±—ä–µ–∫—Ç App

    //—Å–¥–µ–ª–∞–µ–º —Ç–∞–∫, —á—Ç–æ–±—ã –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –º–∞—Ä–∫–µ—Ä—ã —Å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏ –ø–æ—è–≤–ª—è–ª–∏—Å—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∫–∞—Ä—Ç—ã
    this._workouts.forEach((work) => {
      this._renderWorkMarker(work); //_renderWorkoutMarker - —ç—Ç–æ –º–µ—Ç–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∏–π –≤—Å–µ –º–∞—Ä–∫–µ—Ä—ã –Ω–∞ –∫–∞—Ä—Ç–µ
    });
  }

  //–¥–ª—è –ø–æ—è–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–∞–≤–æ–π —Ñ–æ—Ä–º–µ –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–∞—Ä—Ç—É
  _showForm(mapE) {
    this._mapEvent = mapE;
    form.classList.remove("hidden");
    inputDistance.focus();
  }

  //–¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª–µ–π —Å –±–µ–≥–∞ –Ω–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥
  _togleFeeld() {
    inputCadence.closest(".form__row").classList.toggle("form__row--hidden");

    inputElevation.closest(".form__row").classList.toggle("form__row--hidden");
  }

  //–¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≥–µ–æ–º–µ—Ç–∫–∏ —Å –∏–Ω—Ñ–æ–π –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ
  _newWorkout(e) {
    e.preventDefault(); //—Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞

    //—Å–æ–∑–¥–∞–¥–∏–º —Ñ-–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—ã—Ö –≤ input-—ã –¥–∞–Ω–Ω—ã—Ö (–≤–º–µ—Å—Ç–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫—É—Å–∫–∞ –∫–æ–¥–∞ –∏–∑ —á–∞—Å—Ç–∏ //–ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–æ—Ä–º)
    const validInputs = (...inputs) =>
      inputs.every((inp) => Number.isFinite(inp)); //–æ–ø–µ—Ä–∞—Ç–æ—Ä rest (...) –¥–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–±–∏—Ä–∞—Ç—å –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ —ç—Ç—É —Ñ-–∏—é –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞ -> –¥–∞–ª–µ–µ –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º –∫–∞–∂–¥—ã–π –∏–∑ —ç–ª-–æ–≤ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ –º–∞—Å—Å–∏–≤–∞ every -> –∫–∞–∂–¥—ã–π —ç–ª-—Ç –º–∞—Å—Å–∏–≤–∞ –±—É–¥–µ–º –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å –ø–æ–º–æ—â—å—é isFinite

    //—Å–æ–∑–¥–∞–¥–∏–º —Ñ-–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    const allPositive = (...inputs) => inputs.every((inp) => inp > 0);

    //–ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–æ—Ä–º
    const type = inputType.value; //–ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–∏–º —Ç–∏–ø —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
    const distance = +inputDistance.value; //–ø–æ–ª—É—á–∏–º –¥–∏—Å—Ç–∞–Ω—Ü–∏—é –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤ —á–∏—Å–ª–æ
    const duration = +inputDuration.value; //–ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤ —á–∏—Å–ª–æ
    const { lat, lng } = this._mapEvent.latlng; //–ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
    let workout;
    //–µ—Å–ª–∏ —Ç–∏–ø —Ä–∞–≤–µ–Ω –±–µ–≥—É, —Ç–æ
    if (type === "running") {
      const cadence = +inputCadence.value;
      //isFinite(distance) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é distance - —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω–∞ —á–∏—Å–ª–æ–º. –ï—Å–ª–∏ –¥–∞, —Ç–æ –æ—Ç–¥–∞–µ—Ç true
      if (
        // !Number.isFinite(distance) ||
        // !Number.isFinite(duration) ||
        // !Number.isFinite(cadence)
        !validInputs(distance, duration, cadence) ||
        !allPositive(distance, duration, cadence)
      ) {
        return alert("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–≤–µ—Å—Ç–∏ —Ü–µ–ª–æ–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ!");
      }

      //—Å–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –±–µ–≥
      workout = new Running([lat, lng], distance, duration, cadence);
    }

    if (type === "cycling") {
      const elevation = +inputElevation.value;

      //isFinite(distance) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é distance - —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω–∞ —á–∏—Å–ª–æ–º. –ï—Å–ª–∏ –¥–∞, —Ç–æ –æ—Ç–¥–∞–µ—Ç true
      if (
        // !Number.isFinite(distance) ||
        // !Number.isFinite(duration) ||
        // !Number.isFinite(elevation)
        !validInputs(distance, duration, elevation) ||
        !allPositive(distance, duration)
      ) {
        return alert("–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–≤–µ—Å—Ç–∏ —Ü–µ–ª–æ–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ!");
      }
      //—Å–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å –≤–µ–ª–æ—Å–∏–ø–µ–¥–æ–º
      workout = new Cycling([lat, lng], distance, duration, elevation);
    }

    //–≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ –¥–æ–±–∞–≤–ª—è—é—â–∏–π –Ω–æ–≤—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –≤ –º–∞—Å—Å–∏–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
    this._workouts.push(workout); //–∑–∞–ø–∏—Å—å –≤ –º–∞—Å—Å–∏–≤ –Ω–æ–≤–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
    console.log(this._workouts);

    //–≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ä–∫–µ—Ä–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ
    this._renderWorkMarker(workout);

    //–≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –≤ —Ñ–æ—Ä–º–µ
    this._renderWorkout(workout);

    //–≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ –æ—á–∏—Å—Ç–∫–∏ —Ñ–æ—Ä–º—ã –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏
    this._hideForm();

    //–≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –Ω–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –¥–∞–∂–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    this._setLocalStorage();

    this.reset.bind(this);
  }

  //–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ –ø–æ–º–µ—Å—Ç–∏–º –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥
  _renderWorkMarker(workout) {
    L.marker(workout.coords)
      .addTo(this._map)
      .bindPopup(
        L.popup({
          maxWindth: 250,
          minWidth: 100,
          autoClose: false,
          closeOnClick: false,
          className: "mark-popup",
        })
      )
      .setPopupContent(
        `${workout.type === "running" ? "üèÉ" : "üö¥‚Äç‚ôÄÔ∏è"}${workout.description}`
      ) //—Å—é–¥–∞ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–∏
      .openPopup();
  }

  //—Å–æ–∑–¥–∞–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ input-–æ–≤ –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã —Å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–æ–π
  _hideForm() {
    inputDistance.value =
      inputDuration.value =
      inputCadence.value =
      inputElevation.value =
        "";
    form.classList.add("hidden");
    button.classList.remove("hidden");
    button.addEventListener("click", this.reset());
  }
  //—Å–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
  _renderWorkout(workout) {
    let html = `<li class="workout workout--${workout.type}" data-id="${
      workout.id
    }">
    <h2 class="workout__title">${workout.description}</h2>
    <div class="workout__details">
      <span class="workout__icon">${
        workout.type === "running" ? "üèÉ" : "üö¥‚Äç‚ôÄÔ∏è" //–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Ä–Ω–∞—Ä–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –¥–ª—è —Å–º–µ–Ω—ã —ç–º–æ–¥–∑–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
      }</span>
      <span class="workout__value">${workout.distance}</span>
      <span class="workout__unit">–∫–º</span>
    </div>
    <div class="workout__details">
      <span class="workout__icon">‚è±</span>
      <span class="workout__value">${workout.duration}</span>
      <span class="workout__unit">–º–∏–Ω</span>
    </div>`;

    if (workout.type === "running") {
      html += `
          <div class="workout__details">
            <span class="workout__icon">‚ö°Ô∏è</span>
            <span class="workout__value">${workout.pace.toFixed(1)}</span> 
            <span class="workout__unit">–∫–º/–º–∏–Ω</span>
          </div>
          <div class="workout__details">
            <span class="workout__icon">ü¶∂üèº</span>
            <span class="workout__value">${workout.cadence}</span>
            <span class="workout__unit">—à–∞–≥/–º–∏–Ω</span>
          </div>
        </li>
      `;
    }

    if (workout.type === "cycling") {
      html += `
          <div class="workout__details">
            <span class="workout__icon">‚ö°Ô∏è</span>
            <span class="workout__value">${workout.speed.toFixed(1)}</span>
            <span class="workout__unit">–∫–º/—á–∞—Å</span>
          </div>
          <div class="workout__details">
            <span class="workout__icon">‚õ∞</span>
            <span class="workout__value">${workout.elevation}</span>
            <span class="workout__unit">–º</span>
          </div>
        </li> 
      `;
    }
    //–æ—Å—Ç–∞–ª–æ—Å—å –≤—ã–≤–µ—Å—Ç–∏ –≤—Å—é —ç—Ç—É –∏–Ω—Ñ-–∏—é –≤ —Ñ–æ—Ä–º—É
    form.insertAdjacentHTML("afterend", html);
  }

  //–º–µ—Ç–æ–¥ –¥–ª—è –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –ø–ª–∞–≤–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞ –∫ –Ω—É–∂–Ω–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ
  _moveToPopup(e) {
    const workoutEL = e.target.closest(".workout"); //–ø–æ–ª—É—á–∞–µ–º li —Å–æ –≤—Å–µ–π –∏–Ω—Ñ-–µ–π –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ. –ö—Ä–æ–º–µ —Ç–æ–≥–æ —Ç–∞–º –µ—Å—Ç—å id, –∫–æ—Ç–æ—Ä—ã–º –º—ã —Å–µ–π—á–∞—Å –∏ –≤–æ–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–∞—Ö–æ–¥–∏—Ç—å —Å –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ id –Ω—É–∂–Ω—É—é –Ω–∞–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –≤ –º–∞—Å—Å–∏–≤–µ workout
    //–µ—Å–ª–∏ –Ω–∞–∂–∏–º–∞–µ–º –≥–¥–µ-—Ç–æ –≤–Ω–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏, —Ç–µ –≤ –æ–±–ª–∞—Å—Ç–∏, –≥–¥–µ –Ω–µ—Ç –∫–ª–∞—Å—Å–∞ workout, –≤ –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥—è—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ null. –ò–∑–±–∞–≤–∏–º—Å—è –æ—Ç —ç—Ç–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
    if (!workoutEL) return;

    //–Ω–∞–π–¥–µ–º –Ω—É–∂–Ω—É—é –Ω–∞–º —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
    const workout = this._workouts.find(
      (work) => work.id == workoutEL.dataset.id //–∏—â–µ–º –ø–æ –º–∞—Å—Å–∏–≤—É —Å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏ (_workouts) –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é —Å –Ω—É–∂–Ω—ã–º –Ω–∞–º id
    );
    console.log(workout); //–ø–æ–ª—É—á–∞–µ–º –Ω—É–∂–Ω—ã–π –Ω–∞–º –æ–±—ä–µ–∫—Ç (Running{datE, coords etc} –∏–ª–∏ Cycling{} –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏)

    //–ø–ª–∞–Ω—ã–π —Å–∫—Ä–æ–ª–ª –∫ –º–∞—Ä–∫–µ—Ä—É
    //–æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å –∫–∞—Ä—Ç–æ–π (this._map) –∏ –ø–æ–ª—å–∑—É–µ–º—Å—è –º–µ—Ç–æ–¥–æ–º setView (1-—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç - –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø–∏—Å–∞–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π workout.coords, 2-–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç - –∑—É–º, 3-–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç - –æ–ø—Ü–∏–∏ –≤ –∂–µ–ª—Ç—ã—Ö —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö)
    this._map.setView(workout.coords, 16, {
      animate: true, //–∞–Ω–∏–º–∞—Ü–∏—è
      pan: { duration: 1 }, //–ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –µ–µ
    });
  }

  //—Å–æ–∑–¥–∞–¥–∏–º –º–µ—Ç–æ–¥ - —Å–æ—Ö—Ä–∞–Ω—è—é—â–∏–π –≤—Å–µ –Ω–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  _setLocalStorage() {
    //–≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è API,–∫–æ—Ç–æ—Ä–æ–µ –Ω–∞–º –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä - localStorage
    localStorage.setItem("workouts", JSON.stringify(this._workouts)); //1-—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç - –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –º—ã –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å, –∞ 2-–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç - –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ - —á—Ç–æ –∏–º–µ–Ω–Ω–æ –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è. –¢–∫ –Ω–∞–º –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –æ–±—ä–µ–∫—Ç, —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–µ—Ç–æ–¥ JSON.stringify –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –≤ —Å—Ç—Ä–æ–∫—É
  }

  //–º–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (Local Storage)
  _getLocalStorage() {
    const data = JSON.parse(localStorage.getItem("workouts")); //–∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ JSON.stringify –æ–±—Ä–∞—Ç–Ω–æ –≤ –æ–±—ä–µ–∫—Ç—ã
    console.log(data);

    //–µ—Å–ª–∏ –∫–∞–∫–∏—Ö-—Ç–æ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, —Ç–æ –∏ –¥–µ–ª–∞—Ç—å –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–¥–æ
    if (!data) return;

    //–æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Å–æ –≤—Å–µ–º–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º–∏ –∏ –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞–≤–Ω–∞ –¥–∞–Ω–Ω—ã–º (data)
    this._workouts = data;

    //—Ç–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å - –≤—ã–≤–µ—Å—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Å–µ —ç—Ç–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
    this._workouts.forEach((work) => {
      this._renderWorkout(work); //_renderWorkout - —ç—Ç–æ –º–µ—Ç–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–∞—é—â–∏–π –≤—Å–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤ —Ñ–æ—Ä–º–µ
    });

    button.classList.remove("hidden");
    this.reset();
  }

  //—Å–æ–∑–¥–∞–¥–∏–º –º–µ—Ç–æ–¥, –æ—á–∏—â–∞—é—â–∏–π –Ω–∞—à Local Storage
  reset() {
    button.addEventListener("click", function () {
      localStorage.removeItem("workouts");
      location.reload();
    });
  }
}

//–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
const app = new App();
